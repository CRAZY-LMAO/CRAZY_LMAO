<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CRAZY_LMAO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div id="enter-screen">
  <span>Click to Enter</span>
</div>

<video muted loop playsinline id="bg-video">
  <source src="bg.mp4" type="video/mp4">
</video>

<img id="bg-image" src="Overtonight-Bg.png" style="display:none; position:fixed; inset:0; width:100%; height:100%; object-fit:cover; z-index:-4;">

<div class="overlay"></div>
<canvas id="rain"></canvas>

<audio id="bg-music"></audio>

<div class="main hidden">

  <div class="card">
    <img src="pfp.png" class="avatar">
    <h1 class="rainbow-text">CRAZY</h1>

    <p class="about">
      <span class="about-title">This Is Some Facts About Me :D</span><br><br>
      My Name Is CRAZY, I Enjoy Making Games Related To Horror Or The Backrooms,
      I Love Spending Time With My Gf And Friends And Thats All.
    </p>

    <div class="song-control">
      <button id="prev">◀</button>
      <span id="song-name">Song</span>
      <button id="next">▶</button>
    </div>

    <input type="range" id="volume-slider" min="0" max="100" value="50">

    <a href="https://example.com" target="_blank" class="image-link">
      <img src="spotifyimage.png">
    </a>
  </div>

</div>

<div class="bg-switch">
  <button id="bg-prev">◀</button>
  <span>Background</span>
  <button id="bg-next">▶</button>
</div>

<script>
const enter = document.getElementById("enter-screen")
const main = document.querySelector(".main")
const video = document.getElementById("bg-video")
const bgImage = document.getElementById("bg-image")
const music = document.getElementById("bg-music")
const volume = document.getElementById("volume-slider")
const songName = document.getElementById("song-name")

const tabText = "CRAZY_LMAO"
let tabIndex = 0
let deleting = false

function animateTab(){
  document.title = tabText.substring(0, tabIndex)
  if(!deleting){
    tabIndex++
    if(tabIndex > tabText.length) deleting = true
  }else{
    tabIndex--
    if(tabIndex < 0) deleting = false
  }
  setTimeout(animateTab, deleting ? 500 : 500)
}

const playlist = [
  {name:"Mirrors Demo - Overtonight", file:"Mirrors-Demo.mp3"},
  {name:"Sorry I Killed Her - Overtonight", file:"Sorry-I-Killed-Her.mp3"},
  {name:"Ive Been So Sober - Overtonight", file:"Ive-Been-So-Sober.mp3"}
]

let song = 0
function loadSong(i){
  music.src = playlist[i].file
  songName.textContent = playlist[i].name
  music.play()
}

document.getElementById("next").onclick = () => { song = (song+1) % playlist.length; loadSong(song) }
document.getElementById("prev").onclick = () => { song = (song-1+playlist.length) % playlist.length; loadSong(song) }
volume.oninput = () => music.volume = volume.value/100

const bgs = [
  {type:"video", src:"bg.mp4"},
  {type:"image", src:"Overtonight-Bg.png"}
]
let bg = 0

function updateBackground(){
  if(bgs[bg].type === "video"){
    video.src = bgs[bg].src
    video.style.display = "block"
    video.play()
    bgImage.style.display = "none"
  }else{
    bgImage.src = bgs[bg].src
    bgImage.style.display = "block"
    video.style.display = "none"
  }
}

document.getElementById("bg-next").onclick = () => {
  bg = (bg+1) % bgs.length
  updateBackground()
}

document.getElementById("bg-prev").onclick = () => {
  bg = (bg-1+bgs.length) % bgs.length
  updateBackground()
}

enter.onclick = () => {
  enter.classList.add("fade-out")
  main.classList.remove("hidden")
  music.volume = 0.5
  loadSong(0)
  updateBackground()
  animateTab()
  setTimeout(() => enter.remove(), 1000)
}

const canvas = document.getElementById("rain")
const ctx = canvas.getContext("2d")
let w = canvas.width = innerWidth, h = canvas.height = innerHeight
const drops = Array.from({length:200}, ()=>({x:Math.random()*w, y:Math.random()*h, l:10+Math.random()*20, s:4+Math.random()*5}))

;(function rain(){
  ctx.clearRect(0,0,w,h)
  drops.forEach(d=>{
    d.y += d.s
    if(d.y>h) d.y=-d.l
    ctx.strokeStyle = "rgba(200,200,255,.35)"
    ctx.beginPath()
    ctx.moveTo(d.x,d.y)
    ctx.lineTo(d.x,d.y+d.l)
    ctx.stroke()
  })
  requestAnimationFrame(rain)
})()
</script>

</body>
</html>
